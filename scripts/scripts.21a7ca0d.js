"use strict";angular.module("pokerWebClientApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/statistics",{templateUrl:"views/statistics.html",controller:"StatisticsCtrl",controllerAs:"statistics"}).when("/leaderboard",{templateUrl:"views/leaderboard.html",controller:"LeaderboardCtrl",controllerAs:"leaderboard"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl",controllerAs:"login"}).otherwise({redirectTo:"/"}),b.hashPrefix("")}]),angular.module("pokerWebClientApp").service("auth",["$q","$http","$log",function(a,b,c){function d(){var a="/api",b=9e3;return-1!==document.domain.indexOf("localhost")&&(a="http://localhost:"+b+a),a}function e(a,d,e){return b({method:"POST",url:f+a+d,headers:{"Content-Type":"application/json"},data:angular.toJson(e)}).then(function(a){return c.info(a),a.data})["catch"](function(a){return c.error("http fail! response: ",a),{Success:!1,ErrorMessage:"connection to server fail, please check your internet connection!"}})}var f=d();return c.info("service base url:",f),{login:function(a,b){var c={UserName:a,Password:b};return e("/authentication","/login",c)},logout:function(a){return e("/authentication","/logout",{UserName:a.name,SecurityKey:a.securityKey})},getUsers:function(a){return e("/history","/GetAllUsers",{UserName:a.name,SecurityKey:a.securityKey})},getStatistics:function(a){return e("/history","/GetStatistics",{UserName:a.name,SecurityKey:a.securityKey})}}}]),angular.module("pokerWebClientApp").controller("MainCtrl",["$rootScope","$scope","$location","$log","$cookies","auth",function(a,b,c,d,e,f){void 0===a.data&&(a.data={}),void 0==a.func&&(a.func={logout:function(b){f.logout(b).then(function(){e.remove("pokerUser"),d.info("cookie removed"),a.user.isConnected=!1,c.path("/login")})}}),void 0===a.user&&(a.user=e.getObject("pokerUser"),d.warn("$cookie = ",a.user),null==a.user&&(a.user={isConnected:!1,name:null,securityKey:null,players:[]})),a.menu=[{label:"Login",route:"#/login"},{label:"Statistics",route:"#/statistics"},{label:"Leaderboard",route:"#/leaderboard"}],a.menuActive="/",a.$on("$routeChangeSuccess",function(b,e,f){a.menuActive=c.path(),d.debug("user:",a.user),d.debug("e:",b),d.debug("curr:",e),d.debug("prev:",f)})}]),angular.module("pokerWebClientApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("pokerWebClientApp").controller("LoginCtrl",["$cookies","$rootScope","auth","$location","$log",function(a,b,c,d,e){var f=this;f.errorMessage="",f.fail=!1,void 0===b.user&&d.path("/"),f.submit=function(){f.errorMessage="",f.fail=!1,c.login(f.inputUserName,f.inputPassword).then(function(c){c.Success?(b.user.isConnected=!0,b.user.name=c.UserName,b.user.securityKey=c.SecurityKey,b.user.securityKey=c.SecurityKey,b.user.securityKey=c.SecurityKey,b.user.userBank=c.UserBank,b.user.level=c.Level,f.fail=!1,e.info(b.user),f.remember===!0&&(a.putObject("pokerUser",b.user),e.info("$cookies.putObject",b.user)),d.path("/")):(f.fail=!0,f.errorMessage=c.ErrorMessage)})}}]),angular.module("pokerWebClientApp").controller("LeaderboardCtrl",["$log","$rootScope","$location","$scope","auth",function(a,b,c,d,e){var f=this;void 0!==b.user&&b.user.isConnected||c.path("/"),null!=b.user&&e.getUsers(b.user).then(function(b){(null!=b.Users||b.Users.length>0)&&(f.users=b.Users,f.columns=["User Name","Level","Avatar","GrossProfits","GrossLosses","CashGain","GamesPlayed"]),a.info("users: ",b.Users)})}]),angular.module("pokerWebClientApp").controller("StatisticsCtrl",["$location","$rootScope","auth","$log",function(a,b,c,d){var e=this;null!=b.user&&b.user.isConnected?c.getStatistics(b.user).then(function(a){d.info("statistics result:",a),e.WinRateStatistics=a.WinRateStatistics,e.GrossProfitWinRateStatistics=a.GrossProfitWinRateStatistics}):a.path("/")}]),angular.module("pokerWebClientApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/leaderboard.html",'<div class="container"> <div class="table-responsive"> <table class="table table-hover table-bordered table-striped"> <tr> <th ng-repeat="col in leaderboard.columns">{{col}}</th> </tr> <tr ng-repeat="row in leaderboard.users"> <td ng-repeat="col in row">{{col}}</td> </tr> </table> </div> </div>'),a.put("views/login.html",'<!--<p>{{login.remember}}</p>--><!--<p>{{login.inputUserName}}</p>--><!--<p>{{login.inputPassword}}</p>--><!--Tamplete from: https://getbootstrap.com/examples/signin/ --> <div class="container"> <span class="label label-danger">{{login.errorMessage}}</span> <form class="form-signin" ng-submit="login.submit()"> <h2 class="form-signin-heading">Log In To Server</h2> <label for="inputUserName" class="sr-only">User Name</label> <input ng-model="login.inputUserName" type="text" id="inputUserName" class="form-control" placeholder="User Name" required autofocus> <label for="inputPassword" class="sr-only">Password</label> <input ng-model="login.inputPassword" type="password" id="inputPassword" class="form-control" placeholder="Password" required> <div class="checkbox"> <label> <input ng-model="login.remember" type="checkbox" value="remember-me"> Remember me </label> <button class="btn btn-lg btn-primary btn-block" type="submit">Sign in</button> </div> </form> </div>'),a.put("views/main.html",'<div ng-if="!user.isConnected" class="jumbotron"> <h1>Poker Web Client</h1> <p class="text-right">ver. 1.0.0</p> <img class="img-responsive" src="./images/fuller-house-exposing-high-end-poker-cheating-devices.f7ad9ad5.jpg"> <span><b>Hello Guest!</b> Go to "login" first :)</span> </div> <div class="container" ng-if="user.isConnected"> <img class="img-responsive" src="./images/1920X1080_menu_bg.f78c3c4a.jpg"> </div>'),a.put("views/statistics.html",'<div class="jumbotron"> <ui> <li>Win Rate Statistics:</li> <ui> <li>{{statistics.WinRateStatistics}}</li> <ui> <li>Gross Profit Win Rate Statistics:</li> <ui> <li>{{statistics.GrossProfitWinRateStatistics}}</li> <ui> </ui> </ui></ui></ui></ui></div>')}]);